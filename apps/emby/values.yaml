replicaCount: 1

image:
  repository: lscr.io/linuxserver/emby
  tag: latest
  pullPolicy: IfNotPresent

env:
  - name: PUID
    value: "99"
  - name: PGID
    value: "100"
  - name: TZ
    value: America/Chicago

service:
  type: ClusterIP
  ports:
    - name: http
      port: 8920
      targetPort: 8096
      protocol: TCP
    - name: http2
      port: 8096
      targetPort: 8920
      protocol: TCP

persistence:
  config:
    enabled: true
    accessMode: ReadWriteOnce
    size: 50Gi
    mountPath: /config
  backup:
    enabled: true
    nfs:
      server: 10.0.50.3
      path: /mnt/user/emby_backups
    mountPath: /backups
  transcode:
    enabled: true
    hostPath: /emby/transcode
    mountPath: /transcode
  devDri:
    enabled: true
    hostPath: /dev/dri
    mountPath: /dev/dri
  movies:
    enabled: true
    nfs:
      server: 10.0.50.3
      path: /mnt/user/movies
    mountPath: /data/movies
  tv:
    enabled: true
    nfs:
      server: 10.0.50.3
      path: /mnt/user/tv
    mountPath: /data/tv
  music:
    enabled: true
    nfs:
      server: 10.0.50.3
      path: /mnt/user/music
    mountPath: /data/music

resources: {}

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    external-dns.alpha.kubernetes.io/target: "homelab-tunnel.eaglepass.io"
    external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
    hajimari.io/appName: Emby
    hajimari.io/icon: movie-roll
  tls:
    - hosts:
        - emby.eaglepass.io
        - emby-health.eaglepass.io
      secretName: emby-tls-certificate
  hosts:
    - host: emby.eaglepass.io
      paths:
        - path: /
          pathType: Prefix
          servicePort: http
    - host: emby-health.eaglepass.io
      paths:
        - path: /
          pathType: Prefix
          servicePort: http2
