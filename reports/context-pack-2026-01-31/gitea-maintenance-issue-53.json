{"id":65,"url":"https://git.eaglepass.io/api/v1/repos/ops/homelab/issues/53","html_url":"https://git.eaglepass.io/ops/homelab/issues/53","number":53,"user":{"id":1,"login":"gitea_admin","login_name":"","source_id":0,"full_name":"","email":"gitea@local.domain","avatar_url":"https://git.eaglepass.io/avatars/0642e3e25d9a91d2519388e6e4dbc915","html_url":"https://git.eaglepass.io/gitea_admin","language":"en-US","is_admin":true,"last_login":"2026-01-31T01:13:32Z","created":"2025-10-15T15:27:42Z","restricted":false,"active":true,"prohibit_login":false,"location":"","website":"","description":"","visibility":"public","followers_count":0,"following_count":0,"starred_repos_count":0,"username":"gitea_admin"},"original_author":"","original_author_id":0,"title":"[Maintenance] 2026-01-31 - Homelab","body":"# Maintenance Issue Template\n\n\u003e [!IMPORTANT]\n\u003e This template defines the **exact structure** for all maintenance issues.\n\u003e The AI Model MUST follow this template precisely when creating or updating maintenance issues.\n\n---\n\n## Issue Title\n\nFormat: `[Maintenance] YYYY-MM-DD - Homelab`\nWhen resolved: `[RESOLVED] [Maintenance] YYYY-MM-DD - Homelab`\n\n---\n\n## Issue Body Template\n\n```markdown\n# [Maintenance] 2026-01-31 - Homelab\n\n## Status\n\n| Field | Value |\n|-------|-------|\n| **Overall Status** | üî¥ RED |\n| **Last Updated** | 2026-01-31 12:43  |\n| **Source Report** | N/A |\n| **Assigned To** | gitea_admin |\n\n## Context Pack\n\n### Cluster Identity\n\n| Component | Value |\n|-----------|-------|\n| K3s Version | N/A |\n| Node Count | N/A |\n| ArgoCD Apps | N/A total |\n| Ceph Status | N/A |\n\n### Current Health Evidence (Snapshot)\n\n#### Metal Layer\n| Check | Status | Details |\n|-------|--------|---------|\n| Nodes | ‚ö™ |  |\n| Node Versions | ‚ö™ |  |\n| CNI (Cilium) | ‚ö™ |  |\n| Kured | ‚ö™ |  |\n\n#### System Layer\n| Check | Status | Details |\n|-------|--------|---------|\n| CoreDNS | ‚ö™ |  |\n| Metrics Server | ‚ö™ |  |\n| kube-vip | ‚ö™ |  |\n| ArgoCD | ‚ö™ |  |\n\n#### Storage Layer\n| Check | Status | Details |\n|-------|--------|---------|\n| Ceph Health | ‚ö™ |  |\n| OSDs | ‚ö™ |  |\n| Usage | ‚ö™ |  |\n| Pools | ‚ö™ |  |\n| Monitors | ‚ö™ |  |\n| MDS | ‚ö™ |  |\n\n#### Platform Layer\n| Check | Status | Details |\n|-------|--------|---------|\n| Ingress-Nginx | ‚ö™ |  |\n| Certificates | ‚ö™ |  |\n| External Secrets | ‚ö™ |  |\n| Cert-Manager | ‚ö™ |  |\n\n#### Apps Layer\n| Check | Status | Details |\n|-------|--------|---------|\n| All Pods | ‚ö™ |  |\n| Gitea | ‚ö™ |  |\n| Grafana | ‚ö™ |  |\n| Kanidm | ‚ö™ |  |\n\n### Observations\n\n#### üîç Node Activity\nNone\n\n#### üîç Renovate PRs\nNone\n\n#### Network Evidence\n- **Workstation ‚Üí Cluster**: N/A\n- **Gitea API**: N/A\n- **NAS (10.0.40.3)**: N/A\n- **Gateway (10.0.20.1)**: N/A\n\n## Proposed Changes (Spec)\n\n| ID | Type | Layer | Priority | Impact | Downtime | Summary | Dependencies |\n|----|------|-------|----------|--------|----------|---------|--------------|\n| N1 | INVESTIGATE | Network | P2 | Low | None | Verify VLAN gateway ICMP reachability (confirm if blocked by intent) | None |\n| S2 | INVESTIGATE | Storage | P2 | Medium | None | Verify NAS NFS exports (media, backups) | None |\n| R1 | UPDATE | Apps | P2 | Low | None | Merge PR #54: Non-major dependency updates | None |\n| R2 | UPDATE | Platform | P2 | Medium | None | Merge PR #55: Renovate to v46 (major) | None |\n\n## Execution Plan\n\n### Ordering Rules\n1. Process P0 ‚Üí P1 ‚Üí P2 ‚Üí P3\n2. Within priority: Metal ‚Üí System ‚Üí Platform ‚Üí Apps\n3. One change at a time with validation\n\n### Validation Gate (After Each Change)\n\n```bash\nkubectl get nodes | grep -v \"Ready\" || true\nkubectl get pods -n kube-system | grep -v \"Running\\|Completed\" || true\nkubectl get applications -n argocd | grep -v \"Synced.*Healthy\" || true\nkubectl -n rook-ceph exec deploy/rook-ceph-tools -- ceph health\nkubectl get pods -A --no-headers | grep -v \"Running\\|Completed\" || true\n```\n\n**PASS Criteria**: All greps return empty + ceph health = HEALTH_OK\n\n### Stop Conditions\n- Any non-GREEN validation result\n- Node NotReady status\n- Ceph health ‚â† HEALTH_OK\n\n## Action Items (Tasks)\n\n### Preflight\n\n- [ ] **A1 P2**: Verify VLAN Gateway Reachability\n  - **Goal**: Confirm if ICMP is intentionally blocked at the gateway level\n  - **Commands**: `nc -zv 10.0.10.1 443; nc -zv 10.0.20.1 443`\n  - **Expected**: Port 443 open\n  - **If fails**: N/A\n  - **Rollback**: N/A\n\n- [ ] **A2 P2**: Verify NAS NFS Exports\n  - **Goal**: Ensure NFS exports are mountable for services that require them\n  - **Commands**: `showmount -e 10.0.40.3`\n  - **Expected**: Exports for /mnt/user/media and /mnt/user/backups visible\n  - **If fails**: N/A\n  - **Rollback**: N/A\n\n- [ ] **A3 P2**: Merge PR #54 - Non-major updates\n  - **Goal**: Apply Renovate minor/patch updates\n  - **Commands**: `curl -X POST 'https://git.eaglepass.io/api/v1/repos/ops/homelab/pulls/54/merge' -H 'Authorization: token $GITEA_TOKEN' -H 'Content-Type: application/json' -d '{\"Do\":\"merge\"}'`\n  - **Expected**: PR merged, ArgoCD apps healthy\n  - **If fails**: N/A\n  - **Rollback**: git revert \u003ccommit\u003e\n\n- [ ] **A4 P2**: Merge PR #55 - Renovate v46\n  - **Goal**: Update Renovate to v46\n  - **Commands**: `curl -X POST 'https://git.eaglepass.io/api/v1/repos/ops/homelab/pulls/55/merge' -H 'Authorization: token $GITEA_TOKEN' -H 'Content-Type: application/json' -d '{\"Do\":\"merge\"}'`\n  - **Expected**: PR merged, Renovate pod restarts\n  - **If fails**: N/A\n  - **Rollback**: git revert \u003ccommit\u003e\n\n## Change Log\n\n| Timestamp | Phase | Item | Action | Result | Status After |\n|-----------|:-----:|------|--------|--------|:------------:|\n\u003c!-- markdownlint-disable MD055 MD056 --\u003e\n| 2026-01-31 12:43 | None | None | Recon update: Ceph stabilized at HEALTH_OK. Network RED (ICMP), NAS YELLOW (Shares). | Issue updated with current state | ‚ö™ |\n\u003c!-- markdownlint-enable MD055 MD056 --\u003e\n\n## Closure (Filled by homelab-action)\n\n### Completion Criteria:\n- [ ] All action items completed or explicitly deferred\n- [ ] All validation gates passed\n- [ ] No regressions in cluster health\n- [ ] Maintenance issue closed\n\n**Final Status**: PENDING\n\n**Closed By**: PENDING\n**Closed Date**: PENDING\n```\n","ref":"","assets":[],"labels":[{"id":10,"name":"maintenance","exclusive":false,"is_archived":false,"color":"d93f0b","description":"Requires maintenance action","url":"https://git.eaglepass.io/api/v1/repos/ops/homelab/labels/10"}],"milestone":null,"assignee":{"id":1,"login":"gitea_admin","login_name":"","source_id":0,"full_name":"","email":"gitea_admin@noreply.git.eaglepass.io","avatar_url":"https://git.eaglepass.io/avatars/0642e3e25d9a91d2519388e6e4dbc915","html_url":"https://git.eaglepass.io/gitea_admin","language":"","is_admin":false,"last_login":"0001-01-01T00:00:00Z","created":"2025-10-15T15:27:42Z","restricted":false,"active":false,"prohibit_login":false,"location":"","website":"","description":"","visibility":"public","followers_count":0,"following_count":0,"starred_repos_count":0,"username":"gitea_admin"},"assignees":[{"id":1,"login":"gitea_admin","login_name":"","source_id":0,"full_name":"","email":"gitea_admin@noreply.git.eaglepass.io","avatar_url":"https://git.eaglepass.io/avatars/0642e3e25d9a91d2519388e6e4dbc915","html_url":"https://git.eaglepass.io/gitea_admin","language":"","is_admin":false,"last_login":"0001-01-01T00:00:00Z","created":"2025-10-15T15:27:42Z","restricted":false,"active":false,"prohibit_login":false,"location":"","website":"","description":"","visibility":"public","followers_count":0,"following_count":0,"starred_repos_count":0,"username":"gitea_admin"}],"state":"open","is_locked":false,"comments":0,"created_at":"2026-01-30T05:07:18Z","updated_at":"2026-01-31T18:43:16Z","closed_at":null,"due_date":null,"time_estimate":0,"pull_request":null,"repository":{"id":5,"name":"homelab","owner":"ops","full_name":"ops/homelab"},"pin_order":0}
