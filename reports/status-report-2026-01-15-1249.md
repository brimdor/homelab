# Homelab Status Report - 2026-01-15 12:49 CST

**Generated**: 2026-01-15 12:49 CST
**Overall Status**: YELLOW - Action Required

---

## Executive Summary

Critical issues detected in Apps layer requiring immediate attention.

| Layer | Status | Summary |
|-------|:------:|---------|
| **Metal** | GREEN | 10/10 nodes Ready |
| **System** | GREEN | kube-system healthy, Ceph HEALTH_OK |
| **Platform** | YELLOW | 41/44 ArgoCD apps Synced+Healthy |
| **Apps** | RED | 2 apps failing (global-secrets, woodpecker) |

---

## Critical Findings

### P0 - Immediate Action Required

#### 1. global-secrets/secret-generator Job Failing
- **Status**: Error (BackoffLimitExceeded)
- **Namespace**: `global-secrets`
- **Root Cause**: `go.mod` requires `go 1.25.0` but job uses `golang:1.24-alpine` image
- **Fix**: Update image in `platform/global-secrets/templates/secret-generator/job.yaml` from `golang:1.24-alpine` to `golang:1.25-alpine`
- **ArgoCD Status**: Degraded

#### 2. woodpecker-server CrashLoopBackOff
- **Status**: CrashLoopBackOff (5 restarts)
- **Namespace**: `woodpecker`
- **Error**: `"forge not configured"`
- **Root Cause**: `WOODPECKER_GITEA` and `WOODPECKER_OPEN` env vars are empty in deployed StatefulSet. Helm chart isn't rendering boolean `true` values correctly - they need to be quoted strings `"true"`.
- **Fix**: Update `platform/woodpecker/values.yaml` to quote boolean values as strings
- **ArgoCD Status**: Progressing

#### 3. woodpecker-agent Error (Cascading)
- **Status**: Error (6 restarts)
- **Namespace**: `woodpecker`
- **Root Cause**: Can't connect to crashed woodpecker-server
- **Fix**: Will auto-recover after woodpecker-server fix

---

## Layer Details

### Metal Layer (Nodes)

| Node | Status | CPU | Memory | Role |
|------|:------:|----:|-------:|------|
| arcanine | Ready | 47% | 20% | worker |
| bulbasaur | Ready | 19% | 36% | control-plane |
| charmander | Ready | 41% | 30% | control-plane |
| chikorita | Ready | 12% | 20% | worker |
| cyndaquil | Ready | 10% | 27% | worker |
| growlithe | Ready | 12% | 29% | worker |
| pikachu | Ready | 12% | 23% | worker |
| sprigatito | Ready | 6% | 28% | worker |
| squirtle | Ready | 20% | 38% | control-plane |
| totodile | Ready | 11% | 33% | worker |

**Cluster Version**: K3s v1.33.6+k3s1

### System Layer (Core Services)

#### Ceph Storage
- **Status**: HEALTH_OK
- **Muted Alerts**: `DB_DEVICE_STALLED_READ_ALERT`
- **OSDs**: 7 up, 7 in
- **Storage**: 1.2 TiB / 3.4 TiB used (35.69%)
- **PGs**: 177 active+clean

#### kube-system
- All pods Running or Completed
- Cilium: 10/10 pods running

### Platform Layer (GitOps)

**ArgoCD Applications**:
- Total: 44
- Synced+Healthy: 41
- Degraded: 1 (global-secrets)
- Progressing: 2 (woodpecker, grafana)

### Apps Layer

**Non-Running Pods**:
| Namespace | Pod | Status | Issue |
|-----------|-----|--------|-------|
| global-secrets | secret-generator-* (x4) | Error | BackoffLimitExceeded |
| woodpecker | woodpecker-server-0 | CrashLoopBackOff | forge not configured |
| woodpecker | woodpecker-agent-0 | Error | cascading from server |
| grafana | grafana-* | ContainerCreating | transient |
| ollama | ollama-model-puller-* | ContainerCreating | transient |

---

## Repository Status

### Open Pull Requests (7 Renovate PRs)

| PR | Title | Type | Risk |
|---:|-------|------|:----:|
| #36 | Terraform Cloudflare v4 -> v5 | major | HIGH |
| #30 | Redis v7 -> v8 | major | MEDIUM |
| #28 | Postgres v16/17 -> v18 | major | HIGH |
| #27 | MongoDB v6 -> v8 | major | HIGH |
| #26 | MariaDB v10.11 -> v12.1 | major | HIGH |
| #25 | Homepage v0.10.9 -> v1.8.0 | major | LOW |
| #24 | Cloudflared v2024 -> v2025 | major | LOW |

### Open Issues
- #4 Dependency Dashboard (Renovate)

---

## Action Items

### P0 - Critical (Fix Now)
1. Fix global-secrets/secret-generator Go image version
2. Fix woodpecker forge configuration (boolean rendering)
3. Verify services recover after fixes

### P1 - High Priority
4. Delete failed secret-generator jobs after fix
5. Run validation gate

### P2 - Medium Priority (Renovate PRs)
6. Review and test database upgrade PRs (#28, #27, #26) - backup first
7. Review Terraform v5 migration (#36)
8. Merge low-risk PRs (#24, #25)

---

## Verification Commands

```bash
# Check non-running pods
kubectl get pods -A --no-headers | grep -v "Running\|Completed"

# Check ArgoCD app status
kubectl get applications -n argocd | grep -v "Synced.*Healthy"

# Check Ceph health
kubectl -n rook-ceph exec deploy/rook-ceph-tools -- ceph health

# Watch woodpecker recovery
kubectl -n woodpecker get pods -w
```

---

*Report generated by homelab-recon workflow*
